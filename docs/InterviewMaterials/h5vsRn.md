# H5 VS RN

## H5 体验不如 React Native（RN）

  核心原因在于 ​底层渲染机制和运行环境的本质差异

 - H5 的浏览器渲染模型
  - 多层级渲染管线：
H5 的渲染需要经过 ​DOM 解析 → CSS 计算 → 布局（Layout） → 绘制（Paint） → 合成（Composite）​ 多步骤，每一步都可能触发性能瓶颈（如复杂 CSS 动画导致频繁重绘）。
 - RN 的原生组件渲染
  - 直接映射原生组件：
    RN 的`<View>、<Text>` 等组件直接对应 iOS 的 UIView 和 Android 的 TextView，省去浏览器渲染管线。
  - ​线程模型优化：
    JS 线程与 UI 线程分离，复杂计算不会直接阻塞渲染（尽管频繁跨线程通信仍有性能损耗）。

## ​**功能与体验对比**
| 维度                | H5 内嵌（WebView）                              | React Native（RN）                              | 适用场景建议                                   |
|---------------------|-----------------------------------------------|-----------------------------------------------|---------------------------------------------|
| ​**登录页加载速度**   | 依赖网络加载 HTML/JS/CSS，首屏可能白屏           | JS Bundle 可预加载，启动速度接近原生            | 对首屏速度敏感选 RN（如高频工具类 App）        |
| ​**表单交互体验**     | 输入卡顿（iOS 键盘遮挡常见）                     | 原生 TextInput + 自动滚动，动画更流畅           | 表单密集型场景（如电商下单页）优先 RN          |
| ​**网络请求处理**     | 需处理 CORS 跨域问题                            | 直接使用原生 Fetch/XHR，无跨域限制              | 需跨域调用多接口时选 RN（如聚合型应用）        |
| ​**第三方登录**       | 需跳转浏览器授权，流程中断                       | 调用原生 SDK（微信/Google），无缝授权           | 强依赖第三方登录选 RN（如社交类 App）          |
| ​**用户感知**         | URL 变化可见，有网页感                          | 页面过渡原生级流畅                              | 追求原生体验选 RN（如金融/高端电商 App）       |

---

## ​**安全风险对比**
| 风险点              | H5 内嵌（WebView）                              | React Native（RN）                              | 缓解方案                                     |
|---------------------|-----------------------------------------------|-----------------------------------------------|---------------------------------------------|
| ​**Token 存储**       | 存于 localStorage，易被 XSS 窃取               | 原生加密存储（Keychain/Keystore）              | H5：短期 Token + HttpOnly Cookie            |
| ​**中间人攻击**       | 未用 HTTPS 时请求可被拦截                       | 原生库强制证书校验（如 OkHttp 证书锁定）        | 强制全站 HTTPS + HSTS 头（RN 更易实现）       |
| ​**代码混淆**         | JS 压缩仍可逆向（关键逻辑暴露）                 | 原生混淆（ProGuard）+ JS 混淆（Hermes 字节码）  | H5：混淆 + 反调试；RN：分层混淆 + JSI 原生化  |

---

